{"version":3,"file":"index.js","names":["React","useCallback","useEffect","ProgressBarBase","PropTypes","classNames","Annotation","placeInfoAtZero","ANNOTATION_CLASS","HINT_SWAP_PERCENT","PROGRESS_DEFAULT_VARIANT","THRESHOLD_DEFAULT_VARIANT","VARIANTS","ProgressBar","props","createElement","ProgressBarAnnotated","_ref","now","label","variant","threshold","thresholdLabel","thresholdVariant","progressHint","thresholdHint","_objectWithoutProperties","_excluded","progressInfoRef","useRef","thresholdInfoRef","thresholdPercent","isProgressHintAfter","isThresholdHintAfter","progressColor","includes","thresholdColor","positionAnnotations","observer","ResizeObserver","progressInfoEl","current","observe","unobserve","getHint","text","className","style","left","ref","_extends","srOnly","arrowPlacement","propTypes","number","node","oneOf","string","defaultProps","undefined","Annotated"],"sources":["../../src/ProgressBar/index.jsx"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport ProgressBarBase from 'react-bootstrap/ProgressBar';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Annotation from '../Annotation';\nimport { placeInfoAtZero } from './utils';\n\nexport const ANNOTATION_CLASS = 'pgn__annotation';\nconst HINT_SWAP_PERCENT = 50;\nconst PROGRESS_DEFAULT_VARIANT = 'warning';\nconst THRESHOLD_DEFAULT_VARIANT = 'dark';\nconst VARIANTS = [\n  'dark',\n  'warning',\n  'success',\n  'error',\n];\n\nfunction ProgressBar(props) {\n  return <ProgressBarBase {...props} />;\n}\n\nfunction ProgressBarAnnotated({\n  now,\n  label,\n  variant,\n  threshold,\n  thresholdLabel,\n  thresholdVariant,\n  progressHint,\n  thresholdHint,\n  ...props\n}) {\n  const progressInfoRef = React.useRef();\n  const thresholdInfoRef = React.useRef();\n  const thresholdPercent = (threshold || 0) - (now || 0);\n  const isProgressHintAfter = now < HINT_SWAP_PERCENT;\n  const isThresholdHintAfter = threshold < HINT_SWAP_PERCENT;\n  const progressColor = VARIANTS.includes(variant) ? variant : PROGRESS_DEFAULT_VARIANT;\n  const thresholdColor = VARIANTS.includes(thresholdVariant) ? thresholdVariant : THRESHOLD_DEFAULT_VARIANT;\n\n  const positionAnnotations = useCallback(() => {\n    placeInfoAtZero(progressInfoRef, isProgressHintAfter, ANNOTATION_CLASS);\n    placeInfoAtZero(thresholdInfoRef, isThresholdHintAfter, ANNOTATION_CLASS);\n  }, [isProgressHintAfter, isThresholdHintAfter]);\n\n  useEffect(() => {\n    positionAnnotations();\n    const observer = new ResizeObserver(() => {\n      positionAnnotations();\n    });\n    const progressInfoEl = progressInfoRef.current;\n    observer.observe(progressInfoEl);\n    return () => progressInfoEl && observer.unobserve(progressInfoEl);\n  }, [positionAnnotations]);\n\n  const getHint = (text) => (\n    <span className=\"pgn__progress-hint\">\n      {text}\n    </span>\n  );\n\n  return (\n    <div className=\"pgn__progress-annotated\">\n      {!!label && (\n        <div\n          className=\"pgn__progress-info\"\n          style={{ left: `${now}%` }}\n          ref={progressInfoRef}\n        >\n          {!isProgressHintAfter && getHint(progressHint)}\n          <Annotation variant={progressColor}>\n            {label}\n          </Annotation>\n          {isProgressHintAfter && getHint(progressHint)}\n        </div>\n      )}\n      <ProgressBarBase>\n        <ProgressBarBase\n          {...props}\n          now={now}\n          className={classNames(\n            `pgn__progress-bar--${progressColor}`,\n            thresholdPercent > 0 ? 'pgn__progress-tick--white' : 'pgn__progress-tick--black',\n          )}\n          srOnly\n        />\n        {!!threshold && (\n          <ProgressBarBase\n            now={thresholdPercent}\n            className={`pgn__progress-bar--${thresholdColor}`}\n            srOnly\n          />\n        )}\n      </ProgressBarBase>\n      {(!!threshold && !!thresholdLabel) && (\n        <div\n          className=\"pgn__progress-info\"\n          style={{ left: `${threshold}%` }}\n          ref={thresholdInfoRef}\n        >\n          {!isThresholdHintAfter && getHint(thresholdHint)}\n          <Annotation\n            arrowPlacement=\"top\"\n            variant={thresholdColor}\n          >\n            {thresholdLabel}\n          </Annotation>\n          {isThresholdHintAfter && getHint(thresholdHint)}\n        </div>\n      )}\n    </div>\n  );\n}\n\nProgressBarAnnotated.propTypes = {\n  /** Current value of progress. */\n  now: PropTypes.number,\n  /** Show label that represents visual percentage. */\n  label: PropTypes.node,\n  /** The `ProgressBar` style variant to use. */\n  variant: PropTypes.oneOf(VARIANTS),\n  /** Specifies an additional `className` to add to the base element. */\n  className: PropTypes.string,\n  /** Threshold current value. */\n  threshold: PropTypes.number,\n  /** Specifies label for `threshold`. */\n  thresholdLabel: PropTypes.node,\n  /** Variant for threshold value. */\n  thresholdVariant: PropTypes.oneOf(VARIANTS),\n  /** Text near the progress annotation. */\n  progressHint: PropTypes.node,\n  /** Text near the threshold annotation. */\n  thresholdHint: PropTypes.node,\n};\n\nProgressBarAnnotated.defaultProps = {\n  now: undefined,\n  label: undefined,\n  variant: PROGRESS_DEFAULT_VARIANT,\n  className: undefined,\n  threshold: undefined,\n  thresholdLabel: undefined,\n  thresholdVariant: THRESHOLD_DEFAULT_VARIANT,\n  progressHint: undefined,\n  thresholdHint: undefined,\n};\n\nProgressBar.Annotated = ProgressBarAnnotated;\nexport default ProgressBar;\n"],"mappings":"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"}