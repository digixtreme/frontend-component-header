{"version":3,"file":"index.js","names":["React","useLayoutEffect","useRef","PropTypes","truncateLines","useWindowSize","DEFAULT_TRUNCATE_LINES","DEFAULT_TRUNCATE_ELLIPSIS","DEFAULT_TRUNCATE_ELEMENT_TYPE","Truncate","_ref","children","lines","ellipsis","elementType","className","whiteSpace","onTruncate","textContainer","width","current","truncated","original","setAttribute","innerHTML","forEach","element","appendChild","createElement","ref","propTypes","string","isRequired","oneOfType","number","node","bool","func","defaultProps","undefined"],"sources":["../../src/Truncate/index.jsx"],"sourcesContent":["import React, {\n  useLayoutEffect, useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { truncateLines } from './utils';\nimport useWindowSize from '../hooks/useWindowSize';\n\nconst DEFAULT_TRUNCATE_LINES = 1;\nconst DEFAULT_TRUNCATE_ELLIPSIS = '...';\nconst DEFAULT_TRUNCATE_ELEMENT_TYPE = 'div';\n\nfunction Truncate({\n  children, lines, ellipsis, elementType, className, whiteSpace, onTruncate,\n}) {\n  const textContainer = useRef();\n  const { width } = useWindowSize();\n\n  useLayoutEffect(() => {\n    if (textContainer.current) {\n      const [truncated, original] = truncateLines(children, textContainer.current, {\n        ellipsis,\n        whiteSpace,\n        lines,\n      });\n      textContainer.current.setAttribute('title', original);\n      textContainer.current.setAttribute('aria-label', original);\n      textContainer.current.innerHTML = '';\n      truncated.forEach(element => {\n        textContainer.current.appendChild(element);\n      });\n      if (onTruncate) {\n        onTruncate(truncated);\n      }\n    }\n  }, [children, ellipsis, lines, onTruncate, whiteSpace, width]);\n\n  return React.createElement(elementType, {\n    ref: textContainer,\n    className,\n  });\n}\n\nTruncate.propTypes = {\n  /** The expected text to which the ellipsis would be applied. */\n  children: PropTypes.string.isRequired,\n  /** The number of lines the text to be truncated to. */\n  lines: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Text content for the ellipsis - will appear after the truncated lines. */\n  ellipsis: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.node]),\n  /** Adds the whitespace from before the ellipsis. */\n  whiteSpace: PropTypes.bool,\n  /** Custom html element for truncated text. */\n  elementType: PropTypes.string,\n  /** Specifies class name to append to the base element. */\n  className: PropTypes.string,\n  /** Callback fired when a text truncating */\n  onTruncate: PropTypes.func,\n};\n\nTruncate.defaultProps = {\n  lines: DEFAULT_TRUNCATE_LINES,\n  ellipsis: DEFAULT_TRUNCATE_ELLIPSIS,\n  whiteSpace: false,\n  elementType: DEFAULT_TRUNCATE_ELEMENT_TYPE,\n  className: undefined,\n  onTruncate: undefined,\n};\n\nexport default Truncate;\n"],"mappings":"AAAA,OAAOA,KAAK,IACVC,eAAe,EAAEC,MAAM,QAClB,OAAO;AACd,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,aAAa,QAAQ,SAAS;AACvC,OAAOC,aAAa,MAAM,wBAAwB;AAElD,MAAMC,sBAAsB,GAAG,CAAC;AAChC,MAAMC,yBAAyB,GAAG,KAAK;AACvC,MAAMC,6BAA6B,GAAG,KAAK;AAE3C,SAASC,QAAQA,CAAAC,IAAA,EAEd;EAAA,IAFe;IAChBC,QAAQ;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,WAAW;IAAEC,SAAS;IAAEC,UAAU;IAAEC;EACjE,CAAC,GAAAP,IAAA;EACC,MAAMQ,aAAa,GAAGhB,MAAM,EAAE;EAC9B,MAAM;IAAEiB;EAAM,CAAC,GAAGd,aAAa,EAAE;EAEjCJ,eAAe,CAAC,MAAM;IACpB,IAAIiB,aAAa,CAACE,OAAO,EAAE;MACzB,MAAM,CAACC,SAAS,EAAEC,QAAQ,CAAC,GAAGlB,aAAa,CAACO,QAAQ,EAAEO,aAAa,CAACE,OAAO,EAAE;QAC3EP,QAAQ;QACRG,UAAU;QACVJ;MACF,CAAC,CAAC;MACFM,aAAa,CAACE,OAAO,CAACG,YAAY,CAAC,OAAO,EAAED,QAAQ,CAAC;MACrDJ,aAAa,CAACE,OAAO,CAACG,YAAY,CAAC,YAAY,EAAED,QAAQ,CAAC;MAC1DJ,aAAa,CAACE,OAAO,CAACI,SAAS,GAAG,EAAE;MACpCH,SAAS,CAACI,OAAO,CAACC,OAAO,IAAI;QAC3BR,aAAa,CAACE,OAAO,CAACO,WAAW,CAACD,OAAO,CAAC;MAC5C,CAAC,CAAC;MACF,IAAIT,UAAU,EAAE;QACdA,UAAU,CAACI,SAAS,CAAC;MACvB;IACF;EACF,CAAC,EAAE,CAACV,QAAQ,EAAEE,QAAQ,EAAED,KAAK,EAAEK,UAAU,EAAED,UAAU,EAAEG,KAAK,CAAC,CAAC;EAE9D,oBAAOnB,KAAK,CAAC4B,aAAa,CAACd,WAAW,EAAE;IACtCe,GAAG,EAAEX,aAAa;IAClBH;EACF,CAAC,CAAC;AACJ;AAEAN,QAAQ,CAACqB,SAAS,GAAG;EACnB;EACAnB,QAAQ,EAAER,SAAS,CAAC4B,MAAM,CAACC,UAAU;EACrC;EACApB,KAAK,EAAET,SAAS,CAAC8B,SAAS,CAAC,CAAC9B,SAAS,CAAC4B,MAAM,EAAE5B,SAAS,CAAC+B,MAAM,CAAC,CAAC;EAChE;EACArB,QAAQ,EAAEV,SAAS,CAAC8B,SAAS,CAAC,CAAC9B,SAAS,CAAC4B,MAAM,EAAE5B,SAAS,CAAC+B,MAAM,EAAE/B,SAAS,CAACgC,IAAI,CAAC,CAAC;EACnF;EACAnB,UAAU,EAAEb,SAAS,CAACiC,IAAI;EAC1B;EACAtB,WAAW,EAAEX,SAAS,CAAC4B,MAAM;EAC7B;EACAhB,SAAS,EAAEZ,SAAS,CAAC4B,MAAM;EAC3B;EACAd,UAAU,EAAEd,SAAS,CAACkC;AACxB,CAAC;AAED5B,QAAQ,CAAC6B,YAAY,GAAG;EACtB1B,KAAK,EAAEN,sBAAsB;EAC7BO,QAAQ,EAAEN,yBAAyB;EACnCS,UAAU,EAAE,KAAK;EACjBF,WAAW,EAAEN,6BAA6B;EAC1CO,SAAS,EAAEwB,SAAS;EACpBtB,UAAU,EAAEsB;AACd,CAAC;AAED,eAAe9B,QAAQ"}