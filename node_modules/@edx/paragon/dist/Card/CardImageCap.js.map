{"version":3,"file":"CardImageCap.js","names":["React","useContext","useState","PropTypes","classNames","Skeleton","CardContext","cardSrcFallbackImg","SKELETON_HEIGHT_VALUE","LOGO_SKELETON_HEIGHT_VALUE","CardImageCap","forwardRef","_ref","ref","src","fallbackSrc","srcAlt","logoSrc","fallbackLogoSrc","logoAlt","skeletonHeight","skeletonWidth","logoSkeleton","logoSkeletonHeight","logoSkeletonWidth","className","orientation","isLoading","showImageCap","setShowImageCap","showLogoCap","setShowLogoCap","wrapperClassName","createElement","containerClassName","height","width","handleSrcFallback","event","altSrc","imageKey","currentTarget","endsWith","show","onError","onLoad","alt","propTypes","string","number","bool","defaultProps","undefined"],"sources":["../../src/Card/CardImageCap.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Skeleton from 'react-loading-skeleton';\nimport CardContext from './CardContext';\nimport cardSrcFallbackImg from './fallback-default.png';\n\nconst SKELETON_HEIGHT_VALUE = 140;\nconst LOGO_SKELETON_HEIGHT_VALUE = 41;\n\nconst CardImageCap = React.forwardRef(({\n  src,\n  fallbackSrc,\n  srcAlt,\n  logoSrc,\n  fallbackLogoSrc,\n  logoAlt,\n  skeletonHeight,\n  skeletonWidth,\n  logoSkeleton,\n  logoSkeletonHeight,\n  logoSkeletonWidth,\n  className,\n}, ref) => {\n  const { orientation, isLoading } = useContext(CardContext);\n  const [showImageCap, setShowImageCap] = useState(false);\n  const [showLogoCap, setShowLogoCap] = useState(false);\n\n  const wrapperClassName = `pgn__card-wrapper-image-cap ${orientation}`;\n\n  if (isLoading) {\n    return (\n      <div\n        className={classNames(wrapperClassName, className)}\n        data-testid=\"image-loader-wrapper\"\n      >\n        <Skeleton\n          containerClassName=\"pgn__card-image-cap-loader\"\n          height={orientation === 'horizontal' ? '100%' : skeletonHeight}\n          width={skeletonWidth}\n        />\n        {logoSkeleton && (\n          <Skeleton\n            containerClassName=\"pgn__card-logo-cap\"\n            height={logoSkeletonHeight}\n            width={logoSkeletonWidth}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const handleSrcFallback = (event, altSrc, imageKey) => {\n    const { currentTarget } = event;\n\n    if (!altSrc || currentTarget.src.endsWith(altSrc)) {\n      if (imageKey === 'imageCap') {\n        currentTarget.src = cardSrcFallbackImg;\n      } else {\n        setShowLogoCap(false);\n      }\n\n      return;\n    }\n\n    currentTarget.src = altSrc;\n  };\n\n  return (\n    <div className={classNames(className, wrapperClassName)} ref={ref}>\n      {!!src && (\n        <img\n          className={classNames('pgn__card-image-cap', { show: showImageCap })}\n          src={src}\n          onError={(event) => handleSrcFallback(event, fallbackSrc, 'imageCap')}\n          onLoad={() => setShowImageCap(true)}\n          alt={srcAlt}\n        />\n      )}\n      {!!logoSrc && (\n        <img\n          className={classNames('pgn__card-logo-cap', { show: showLogoCap })}\n          src={logoSrc}\n          onError={(event) => handleSrcFallback(event, fallbackLogoSrc, 'logoCap')}\n          onLoad={() => setShowLogoCap(true)}\n          alt={logoAlt}\n        />\n      )}\n    </div>\n  );\n});\n\nCardImageCap.propTypes = {\n  /** Specifies class name to append to the base element. */\n  className: PropTypes.string,\n  /** Specifies image src. */\n  src: PropTypes.string,\n  /** Specifies fallback image src. */\n  fallbackSrc: PropTypes.string,\n  /** Specifies image alt text. */\n  srcAlt: PropTypes.string,\n  /** Specifies logo src to put on top of the image. */\n  logoSrc: PropTypes.string,\n  /** Specifies fallback image logo src. */\n  fallbackLogoSrc: PropTypes.string,\n  /** Specifies logo image alt text. */\n  logoAlt: PropTypes.string,\n  /** Specifies height of Image skeleton in loading state. */\n  skeletonHeight: PropTypes.number,\n  /** Specifies width of Image skeleton in loading state. */\n  skeletonWidth: PropTypes.number,\n  /** Specifies whether the cap should be displayed during loading. */\n  logoSkeleton: PropTypes.bool,\n  /** Specifies height of Logo skeleton in loading state. */\n  logoSkeletonHeight: PropTypes.number,\n  /** Specifies width of Logo skeleton in loading state. */\n  logoSkeletonWidth: PropTypes.number,\n};\n\nCardImageCap.defaultProps = {\n  src: undefined,\n  fallbackSrc: cardSrcFallbackImg,\n  logoSrc: undefined,\n  fallbackLogoSrc: undefined,\n  className: undefined,\n  srcAlt: undefined,\n  logoAlt: undefined,\n  skeletonHeight: SKELETON_HEIGHT_VALUE,\n  logoSkeleton: false,\n  logoSkeletonHeight: LOGO_SKELETON_HEIGHT_VALUE,\n  skeletonWidth: undefined,\n  logoSkeletonWidth: undefined,\n};\n\nexport default CardImageCap;\n"],"mappings":"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"}