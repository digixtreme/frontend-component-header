{"version":3,"file":"index.js","names":["React","PropTypes","classNames","DropdownButton","DropdownMenu","DropdownItem","withDeprecatedProps","DeprTypes","Provider","Consumer","createContext","Dropdown","Component","constructor","props","_defineProperty","e","containerRef","current","contains","target","state","open","close","key","preventDefault","focusPrevious","focusNext","shiftKey","stopPropagation","uniqueId","idCounter","triggerId","createRef","menuRef","buttonRef","componentDidUpdate","prevProps","prevState","focusFirst","focus","componentWillUnmount","document","removeEventListener","handleDocumentClick","getFocusableElements","selector","Array","from","querySelectorAll","setState","addEventListener","focusableElements","length","allFocusableElements","activeIndex","indexOf","activeElement","nextIndex","previousIndex","render","_this$props","children","other","_objectWithoutProperties","_excluded","createElement","_extends","className","show","ref","value","handleMenuKeyDown","isOpen","toggle","propTypes","node","Item","Button","Menu","DropdownWithDeprecatedProps","menuItems","deprType","MOVED_AND_FORMAT","message","newName","transform","allProps","isArray","Fragment","isValidElement","iconElement","title","map","menuItem","i","cloneElement","href","label","REMOVED","buttonType","defaultProps"],"sources":["../../../src/Dropdown/deprecated/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n// eslint-disable-next-line import/no-cycle\nimport DropdownButton from './DropdownButton';\n// eslint-disable-next-line import/no-cycle\nimport DropdownMenu from './DropdownMenu';\nimport DropdownItem from './DropdownItem';\n\nimport withDeprecatedProps, { DeprTypes } from '../../withDeprecatedProps';\n\nconst { Provider, Consumer } = React.createContext();\n\nclass Dropdown extends React.Component {\n  // eslint-disable-next-line react/sort-comp\n  static idCounter = 0; // For creating unique ids\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n\n    // Used for aria labelling. Increment the id counter so the next id can be unique\n    this.uniqueId = Dropdown.idCounter;\n    Dropdown.idCounter += 1;\n    this.triggerId = `pgn__dropdown-trigger-${this.uniqueId}`;\n\n    this.containerRef = React.createRef();\n    this.menuRef = React.createRef();\n    this.buttonRef = React.createRef();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.open !== this.state.open) {\n      if (this.state.open) {\n        this.focusFirst();\n      } else {\n        this.buttonRef.current.focus();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleDocumentClick, true);\n  }\n\n  getFocusableElements() {\n    const selector = 'button:not([disabled]), [href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"]):not([disabled])';\n    return Array.from(this.menuRef.current.querySelectorAll(selector));\n  }\n\n  handleDocumentClick = (e) => {\n    if (this.containerRef.current.contains(e.target) && this.containerRef.current !== e.target) {\n      return;\n    }\n    if (this.state.open) {\n      this.close();\n    }\n  };\n\n  handleMenuKeyDown = (e) => {\n    switch (e.key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        this.focusPrevious();\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        this.focusNext();\n        break;\n      case 'Tab':\n        e.preventDefault();\n        if (e.shiftKey) {\n          this.focusPrevious();\n        } else {\n          this.focusNext();\n        }\n        break;\n      case 'Escape':\n        e.stopPropagation();\n        this.close();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggle = () => {\n    if (this.state.open) {\n      this.close();\n    } else {\n      this.open();\n    }\n  };\n\n  close() {\n    document.removeEventListener('click', this.handleDocumentClick, true);\n    this.setState({\n      open: false,\n    });\n  }\n\n  open() {\n    // adding event listener here so the user can close dropdown on click outside of the dropdown\n    document.addEventListener('click', this.handleDocumentClick, true);\n    this.setState({\n      open: true,\n    });\n  }\n\n  focusFirst() {\n    const focusableElements = this.getFocusableElements();\n    if (focusableElements.length) { focusableElements[0].focus(); }\n  }\n\n  focusNext() {\n    const allFocusableElements = this.getFocusableElements();\n    if (allFocusableElements.length === 0) { return; }\n    const activeIndex = allFocusableElements.indexOf(document.activeElement);\n    const nextIndex = (activeIndex + 1) % allFocusableElements.length;\n    allFocusableElements[nextIndex].focus();\n  }\n\n  focusPrevious() {\n    const allFocusableElements = this.getFocusableElements();\n    if (allFocusableElements.length === 0) { return; }\n    const activeIndex = allFocusableElements.indexOf(document.activeElement);\n    const previousIndex = ((activeIndex - 1) + allFocusableElements.length) % allFocusableElements.length;\n    allFocusableElements[previousIndex].focus();\n  }\n\n  render() {\n    const { children, ...other } = this.props;\n\n    return (\n      <div\n        {...other}\n        className={classNames(\n          'dropdown',\n          { show: this.state.open },\n          other.className,\n        )}\n        ref={this.containerRef}\n      >\n        <Provider\n          value={{\n            buttonRef: this.buttonRef,\n            handleMenuKeyDown: this.handleMenuKeyDown,\n            isOpen: this.state.open,\n            menuRef: this.menuRef,\n            toggle: this.toggle,\n            triggerId: this.triggerId,\n          }}\n        >\n          {children}\n        </Provider>\n      </div>\n    );\n  }\n}\n\nDropdown.propTypes = {\n  children: PropTypes.node,\n};\n\nDropdown.Item = DropdownItem;\nDropdown.Button = DropdownButton;\nDropdown.Menu = DropdownMenu;\n\nconst DropdownWithDeprecatedProps = withDeprecatedProps(Dropdown, 'Dropdown', {\n  menuItems: {\n    deprType: DeprTypes.MOVED_AND_FORMAT,\n    message: 'They should be components sent as children.',\n    newName: 'children',\n    transform: (menuItems, allProps) => {\n      if (!Array.isArray(menuItems)) { return null; }\n      return (\n        <>\n          <DropdownButton>\n            {React.isValidElement(allProps.iconElement) ? allProps.iconElement : null }\n            {allProps.title}\n          </DropdownButton>\n          <DropdownMenu>\n            {menuItems.map((menuItem, i) => {\n            /* eslint-disable react/no-array-index-key */\n              if (React.isValidElement(menuItem)) {\n                return React.cloneElement(menuItem, {\n                  className: 'dropdown-item',\n                  key: i,\n                });\n              }\n              return <DropdownItem key={i} href={menuItem.href}>{menuItem.label}</DropdownItem>;\n            /* eslint-enable react/no-array-index-key */\n            })}\n          </DropdownMenu>\n        </>\n      );\n    },\n  },\n  title: {\n    deprType: DeprTypes.REMOVED,\n    message: 'It should be specified inside the Dropdown.Button component',\n  },\n  buttonType: {\n    deprType: DeprTypes.REMOVED,\n    message: 'It should be specified as a className prop',\n  },\n  iconElement: {\n    deprType: DeprTypes.REMOVED,\n    message: 'It should be specified inside the buttonContent prop.',\n  },\n});\n\nDropdownWithDeprecatedProps.propTypes = Dropdown.propTypes;\nDropdownWithDeprecatedProps.defaultProps = Dropdown.defaultProps;\nDropdownWithDeprecatedProps.Item = Dropdown.Item;\nDropdownWithDeprecatedProps.Button = Dropdown.Button;\nDropdownWithDeprecatedProps.Menu = Dropdown.Menu;\n\nexport { Provider, Consumer };\nexport default DropdownWithDeprecatedProps;\n"],"mappings":"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"}