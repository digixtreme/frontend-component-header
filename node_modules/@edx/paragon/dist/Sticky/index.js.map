{"version":3,"file":"index.js","names":["React","useLayoutEffect","useState","PropTypes","classNames","POSITION_VARIANTS","Sticky","forwardRef","_ref","ref","position","children","offset","className","rest","_objectWithoutProperties","_excluded","isSticky","setIsSticky","defaultRef","useRef","resolvedRef","current","stickyElement","elementStyles","window","getComputedStyle","elementOffset","elementWithOffset","parseInt","observer","IntersectionObserver","_ref2","entry","intersectionRatio","threshold","rootMargin","observe","unobserve","createElement","_extends","propTypes","node","isRequired","oneOf","oneOfType","number","string","defaultProps","undefined"],"sources":["../../src/Sticky/index.jsx"],"sourcesContent":["import React, { useLayoutEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst POSITION_VARIANTS = [\n  'top',\n  'bottom',\n];\n\nconst Sticky = React.forwardRef(({\n  position,\n  children,\n  offset,\n  className,\n  ...rest\n}, ref) => {\n  const [isSticky, setIsSticky] = useState(false);\n  const defaultRef = React.useRef();\n  const resolvedRef = ref || defaultRef;\n\n  // eslint-disable-next-line consistent-return\n  useLayoutEffect(() => {\n    if (resolvedRef.current) {\n      const stickyElement = resolvedRef.current;\n      // getComputedStyle is used to get real top/bottom\n      // values on the page for proper shadows display\n      const elementStyles = window.getComputedStyle(stickyElement);\n      const elementOffset = elementStyles[position || 'top'];\n      // Margin calculations according to the offset.\n      // 1 pixel above/bellow + offset pixels that determines\n      // when callback function is called\n      const elementWithOffset = 1 + (parseInt(elementOffset, 10) || 0);\n      const observer = new IntersectionObserver(\n        ([entry]) => setIsSticky(entry.intersectionRatio < 1),\n        {\n          threshold: [1],\n          rootMargin: position === 'bottom'\n            ? `0px 0px -${elementWithOffset}px 0px`\n            : `-${elementWithOffset}px 0px 0px 0px`,\n        },\n      );\n      observer.observe(stickyElement);\n\n      return () => {\n        observer.unobserve(stickyElement);\n      };\n    }\n  }, [position, resolvedRef]);\n\n  return (\n    <div\n      className={classNames(\n        'pgn__sticky',\n        `pgn__sticky-${position || 'top'}`,\n        offset ? `pgn__sticky-offset--${offset}` : '',\n        { 'pgn__sticky-shadow': isSticky },\n        className,\n      )}\n      ref={resolvedRef}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n});\n\nSticky.propTypes = {\n  /** Specifies content of the component. */\n  children: PropTypes.node.isRequired,\n  /** Specifies position of the element. */\n  position: PropTypes.oneOf(POSITION_VARIANTS),\n  /**\n   * Specifies offset from top/bottom depending on the `position` property.\n   *\n   * Valid values are based on `the spacing classes`:\n   * `0, 0.5, ... 6`.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /** Specifies an additional `className` to add to the base element. */\n  className: PropTypes.string,\n};\n\nSticky.defaultProps = {\n  position: 'top',\n  offset: undefined,\n  className: undefined,\n};\n\nexport default Sticky;\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,eAAe,EAAEC,QAAQ,QAAQ,OAAO;AACxD,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,UAAU,MAAM,YAAY;AAEnC,MAAMC,iBAAiB,GAAG,CACxB,KAAK,EACL,QAAQ,CACT;AAED,MAAMC,MAAM,gBAAGN,KAAK,CAACO,UAAU,CAAC,CAAAC,IAAA,EAM7BC,GAAG,KAAK;EAAA,IANsB;MAC/BC,QAAQ;MACRC,QAAQ;MACRC,MAAM;MACNC;IAEF,CAAC,GAAAL,IAAA;IADIM,IAAI,GAAAC,wBAAA,CAAAP,IAAA,EAAAQ,SAAA;EAEP,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMiB,UAAU,GAAGnB,KAAK,CAACoB,MAAM,EAAE;EACjC,MAAMC,WAAW,GAAGZ,GAAG,IAAIU,UAAU;;EAErC;EACAlB,eAAe,CAAC,MAAM;IACpB,IAAIoB,WAAW,CAACC,OAAO,EAAE;MACvB,MAAMC,aAAa,GAAGF,WAAW,CAACC,OAAO;MACzC;MACA;MACA,MAAME,aAAa,GAAGC,MAAM,CAACC,gBAAgB,CAACH,aAAa,CAAC;MAC5D,MAAMI,aAAa,GAAGH,aAAa,CAACd,QAAQ,IAAI,KAAK,CAAC;MACtD;MACA;MACA;MACA,MAAMkB,iBAAiB,GAAG,CAAC,IAAIC,QAAQ,CAACF,aAAa,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;MAChE,MAAMG,QAAQ,GAAG,IAAIC,oBAAoB,CACvCC,KAAA;QAAA,IAAC,CAACC,KAAK,CAAC,GAAAD,KAAA;QAAA,OAAKd,WAAW,CAACe,KAAK,CAACC,iBAAiB,GAAG,CAAC,CAAC;MAAA,GACrD;QACEC,SAAS,EAAE,CAAC,CAAC,CAAC;QACdC,UAAU,EAAE1B,QAAQ,KAAK,QAAQ,GAC5B,YAAWkB,iBAAkB,QAAO,GACpC,IAAGA,iBAAkB;MAC5B,CAAC,CACF;MACDE,QAAQ,CAACO,OAAO,CAACd,aAAa,CAAC;MAE/B,OAAO,MAAM;QACXO,QAAQ,CAACQ,SAAS,CAACf,aAAa,CAAC;MACnC,CAAC;IACH;EACF,CAAC,EAAE,CAACb,QAAQ,EAAEW,WAAW,CAAC,CAAC;EAE3B,oBACErB,KAAA,CAAAuC,aAAA,QAAAC,QAAA;IACE3B,SAAS,EAAET,UAAU,CACnB,aAAa,EACZ,eAAcM,QAAQ,IAAI,KAAM,EAAC,EAClCE,MAAM,GAAI,uBAAsBA,MAAO,EAAC,GAAG,EAAE,EAC7C;MAAE,oBAAoB,EAAEK;IAAS,CAAC,EAClCJ,SAAS,CACT;IACFJ,GAAG,EAAEY;EAAY,GACbP,IAAI,GAEPH,QAAQ,CACL;AAEV,CAAC,CAAC;AAEFL,MAAM,CAACmC,SAAS,GAAG;EACjB;EACA9B,QAAQ,EAAER,SAAS,CAACuC,IAAI,CAACC,UAAU;EACnC;EACAjC,QAAQ,EAAEP,SAAS,CAACyC,KAAK,CAACvC,iBAAiB,CAAC;EAC5C;AACF;AACA;AACA;AACA;AACA;EACEO,MAAM,EAAET,SAAS,CAAC0C,SAAS,CAAC,CAAC1C,SAAS,CAAC2C,MAAM,EAAE3C,SAAS,CAAC4C,MAAM,CAAC,CAAC;EACjE;EACAlC,SAAS,EAAEV,SAAS,CAAC4C;AACvB,CAAC;AAEDzC,MAAM,CAAC0C,YAAY,GAAG;EACpBtC,QAAQ,EAAE,KAAK;EACfE,MAAM,EAAEqC,SAAS;EACjBpC,SAAS,EAAEoC;AACb,CAAC;AAED,eAAe3C,MAAM"}